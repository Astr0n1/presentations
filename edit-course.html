<!DOCTYPE html>
<html lang="ar" dir="rtl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Lessons - المنصة التعليمية</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/>
		<link rel="stylesheet" href="css/styles.css" />
		<link rel="stylesheet" href="css/edit.css" />

		<script defer src="https://cdn.tailwindcss.com"></script>
		<script
			defer
			src="https://cdn.jsdelivr.net/npm/sweetalert2@11"
		></script>
		<script defer src="js/auth.js"></script>
		<script defer src="js/edit.js"></script>
	</head>
	<!-- <body class="bg-gray-100 min-h-screen" onload="requireAdmin()"> -->

	<body class="bg-gray-100 min-h-screen">
		<!-- Resize Indicator -->
		<div id="resize-indicator" class="resize-indicator"></div>

		<!-- Header -->
		<header class="bg-white border-b border-gray-200">
			<div class="flex items-center justify-between px-6 py-4">
				<div class="flex items-center space-x-4 space-x-reverse">
					<button class="p-2 rounded-lg hover:bg-gray-100">
						<i class="fas fa-arrow-right text-gray-600"></i>
					</button>
					<h1 class="text-xl font-bold text-gray-900">Lessons</h1>
				</div>
				<div class="flex items-center space-x-3 space-x-reverse">
					<button
						id="save-changes"
						class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
					>
						حفظ التغييرات
					</button>
					<button class="p-2 rounded-lg hover:bg-gray-100">
						<i class="fas fa-ellipsis-v text-gray-600"></i>
					</button>
				</div>
			</div>
		</header>

		<div class="flex">
			<!-- Edit Sidebar (Left) -->
			<div
				class="edit-sidebar fixed left-0 top-0 h-full bg-white border-r border-gray-200 overflow-y-auto z-20"
			>
				<!-- Resize Handle for Left Sidebar -->
				<div
					class="resize-handle resize-handle-right"
					id="resize-edit-sidebar"
				></div>

				<div class="p-6">
					<div class="flex items-center justify-between mb-6">
						<h2 class="text-xl font-bold text-gray-900">
							تعديل السلايد
						</h2>
						<button
							id="toggle-edit-sidebar"
							class="p-2 rounded-lg hover:bg-gray-100"
						>
							<i class="fas fa-chevron-left text-gray-600"></i>
						</button>
					</div>

					<div id="slide-edit-content">
						<!-- Content will be dynamically loaded here based on selected slide -->
						<div class="text-center text-gray-500 py-12">
							<i class="fas fa-edit text-4xl mb-4"></i>
							<p>اختر سلايداً للتعديل</p>
						</div>
					</div>
				</div>
			</div>

			<!-- Main Content -->
			<div class="main-content flex-1 p-6">
				<!-- Current Lesson Header -->
				<div class="bg-white rounded-xl shadow-sm p-6 mb-6">
					<div class="flex items-center justify-between">
						<div
							class="flex items-center space-x-4 space-x-reverse"
						>
							<div id="lesson-title-display">
								<h2
									class="text-2xl font-bold text-gray-900"
									id="current-lesson-title"
								>
									الدرس الأول
								</h2>
								<p
									class="text-gray-600 mt-1"
									id="current-lesson-code"
								>
									400 014
								</p>
							</div>
							<button
								id="edit-lesson-title"
								class="p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
							>
								<i class="fas fa-edit"></i>
							</button>
						</div>
						<div
							class="flex items-center space-x-3 space-x-reverse"
						>
							<button
								id="toggle-sidebar"
								class="p-2 rounded-lg hover:bg-gray-100"
							>
								<i class="fas fa-bars text-gray-600"></i>
							</button>
						</div>
					</div>

					<!-- Edit Lesson Title Form (Hidden by default) -->
					<div
						id="edit-lesson-form"
						class="mt-4 p-4 bg-gray-50 rounded-lg hidden"
					>
						<div class="space-y-3">
							<div>
								<label
									class="block text-sm font-medium text-gray-700 mb-2"
									>اسم الدرس</label
								>
								<input
									type="text"
									id="lesson-title-input"
									class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
								/>
							</div>
							<div>
								<label
									class="block text-sm font-medium text-gray-700 mb-2"
									>كود الدرس</label
								>
								<input
									type="text"
									id="lesson-code-input"
									class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
								/>
							</div>
							<div
								class="flex items-center space-x-3 space-x-reverse"
							>
								<button
									id="save-lesson-title"
									class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
								>
									حفظ
								</button>
								<button
									id="cancel-lesson-edit"
									class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
								>
									إلغاء
								</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Slide Preview Area -->
				<div class="bg-white rounded-xl shadow-sm overflow-hidden mb-6">
					<div
						id="slide-preview-container"
						class="slide-preview rounded-t-xl"
					>
						<!-- Preview content will be dynamically loaded here -->
						<div
							id="slide-preview-content"
							class="slide-content text-center text-white p-8 w-full"
						>
							<div class="max-w-2xl mx-auto">
								<i
									class="fas fa-sliders-h text-6xl mb-6 opacity-50"
								></i>
								<h2 class="text-3xl font-bold mb-4">
									اختر سلايداً للمعاينة
								</h2>
								<p class="text-xl opacity-90">
									انقر على أي سلايد من القائمة لرؤية محتواه
									هنا
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Right Sidebar -->
			<div
				class="sidebar fixed right-0 top-0 h-full bg-white border-l border-gray-200 overflow-y-auto z-10"
			>
				<!-- Resize Handle for Right Sidebar -->
				<div
					class="resize-handle resize-handle-left"
					id="resize-sidebar"
				></div>

				<div class="p-6">
					<!-- Course Header -->
					<div class="mb-8">
						<h2 class="text-2xl font-bold text-gray-900 mb-2">
							الدروس
						</h2>
					</div>

					<!-- Lessons List -->
					<div class="mb-6">
						<h3 class="text-lg font-semibold text-gray-900 mb-4">
							قائمة الدروس
						</h3>
						<div id="lessons-list" class="space-y-3">
							<!-- Lessons will be dynamically added here -->
						</div>
					</div>

					<!-- Add Lesson Button -->
					<button
						id="add-lesson-btn"
						class="w-full flex items-center justify-center space-x-2 space-x-reverse py-3 px-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-colors mb-6"
					>
						<i class="fas fa-plus"></i>
						<span>إضافة درس جديد</span>
					</button>
				</div>
			</div>
		</div>

		<!-- Add Slide Modal -->
		<div
			id="add-slide-modal"
			class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
		>
			<div
				class="bg-white rounded-xl shadow-lg w-full max-w-4xl h-[70vh] flex flex-col"
			>
				<div
					class="flex items-center justify-between p-4 border-b border-gray-200"
				>
					<button
						id="cancel-add-slide"
						class="p-2 rounded-full hover:bg-gray-100"
					>
						<i class="fas fa-times text-gray-600"></i>
					</button>
					<h3 class="text-xl font-bold text-gray-900">
						مكتبة الشرائح
					</h3>
				</div>

				<div class="flex flex-1 overflow-hidden">
					<div
						class="w-1/4 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto"
					>
						<nav id="slide-category-nav" class="space-y-2">
							<a
								href="#"
								class="slide-category-btn flex items-center space-x-3 space-x-reverse px-3 py-2 rounded-lg font-medium text-gray-700 hover:bg-gray-200"
								data-category="text"
							>
								<i class="fas fa-font w-5 text-center"></i>
								<span>نص</span>
							</a>
							<a
								href="#"
								class="slide-category-btn flex items-center space-x-3 space-x-reverse px-3 py-2 rounded-lg font-medium text-gray-700 hover:bg-gray-200"
								data-category="image"
							>
								<i class="fas fa-image w-5 text-center"></i>
								<span>صورة</span>
							</a>
							<a
								href="#"
								class="slide-category-btn flex items-center space-x-3 space-x-reverse px-3 py-2 rounded-lg font-medium text-gray-700 hover:bg-gray-200"
								data-category="video"
							>
								<i class="fas fa-video w-5 text-center"></i>
								<span>فيديو</span>
							</a>
							<a
								href="#"
								class="slide-category-btn flex items-center space-x-3 space-x-reverse px-3 py-2 rounded-lg font-medium text-gray-700 hover:bg-gray-200"
								data-category="quiz"
							>
								<i
									class="fas fa-question-circle w-5 text-center"
								></i>
								<span>اختبار</span>
							</a>
						</nav>
					</div>

					<div
						id="slide-templates-container"
						class="flex-1 p-6 overflow-y-auto"
					></div>
				</div>
			</div>
		</div>
	</body>
</html>
